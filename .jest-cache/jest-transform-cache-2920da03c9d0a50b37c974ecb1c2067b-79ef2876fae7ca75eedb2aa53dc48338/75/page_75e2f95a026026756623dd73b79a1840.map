{"version":3,"sources":["C:\\Users\\khana\\OneDrive\\Computer Files\\Desktop\\6senseHQ-HireX-client\\app\\(dashboards)\\create-job\\page.tsx"],"sourcesContent":["'use client';\nimport React, { useEffect } from 'react';\nimport { SubmitHandler, useForm } from 'react-hook-form';\nimport { Button } from '@/components/ui/button';\nimport JobInformation from './_components/jobInformation';\nimport JobResponsibilites from './_components/jobResponsibilites';\nimport IdealCandidates from './_components/idealCandidates';\nimport InterviewStage from './_components/interviewStage';\nimport { useMutation, useQuery } from '@tanstack/react-query';\nimport {\n  getDepartments,\n  getJobpostion,\n  handleCreateJob,\n} from '@/api/Job/JobApi';\nimport { useRouter } from 'next/navigation';\nimport { JobDepartmentList, JobPositionList } from '@/types/Job/type';\n\nconst CreateJob = () => {\n  const {\n    handleSubmit,\n    setValue,\n    control,\n    formState: { errors },\n  } = useForm<any>({\n    defaultValues: {\n      interviewStages: [],\n    },\n  });\n\n  const router = useRouter();\n\n  useEffect(() => {\n    const checkToken = () => {\n      const token = localStorage.getItem('accessToken');\n      if (!token) {\n        router.push('/login');\n      }\n    };\n\n    checkToken();\n\n    const handleStorageChange = (event: StorageEvent) => {\n      if (event.key === 'accessToken') {\n        checkToken();\n      }\n    };\n\n    window.addEventListener('storage', handleStorageChange);\n\n    return () => {\n      window.removeEventListener('storage', handleStorageChange);\n    };\n  }, [router]);\n\n  const { data: jobpositions } = useQuery<\n    JobPositionList,\n    any,\n    JobPositionList\n  >({\n    queryKey: ['jobpositions'],\n    queryFn: () => getJobpostion(),\n    enabled: true,\n  });\n\n  const { data: departments } = useQuery<\n    JobDepartmentList,\n    any,\n    JobDepartmentList\n  >({\n    queryKey: ['departments'],\n    queryFn: () => getDepartments(),\n    enabled: true,\n  });\n\n  const jobPositionOptions =\n    jobpositions?.map((jobpositions: { jobPositionName: string }) => ({\n      value: jobpositions.jobPositionName,\n      label: jobpositions.jobPositionName,\n    })) || [];\n\n  const departmentOptions =\n    departments?.map((departments: { jobDepartmentName: string }) => ({\n      value: departments.jobDepartmentName,\n      label: departments.jobDepartmentName,\n    })) || [];\n\n  const createJobMutation = useMutation({\n    mutationFn: handleCreateJob,\n    onSuccess: () => {\n      router.push('/dashboard');\n    },\n  });\n\n  const handleSubmission: SubmitHandler<any> = (data) => {\n    const { interviewMedium, ...filteredData } = data;\n\n    createJobMutation.mutate(filteredData);\n  };\n\n  return (\n    <div className='bg-white px-[16px]'>\n      <form className='pb-28' onSubmit={handleSubmit(handleSubmission)}>\n        <div className='min-h-screen'>\n          {/* Job Information Area*/}\n          <JobInformation\n            control={control}\n            errors={errors}\n            setValue={setValue}\n            jobPositionOptions={jobPositionOptions}\n            departmentOptions={departmentOptions}\n          />\n\n          {/* Interview Stage Area  */}\n          <InterviewStage\n            control={control}\n            setValue={setValue}\n            errors={errors}\n          />\n\n          {/* Job Responsibilites Area */}\n          <JobResponsibilites control={control} errors={errors} />\n\n          {/* Ideal Candidate Area */}\n          <IdealCandidates control={control} errors={errors} />\n\n          <div className='mt-[30px] flex justify-end gap-[16px]'>\n            <Button\n              variant='blackwhite'\n              className='h-[40px] w-[80px]'\n              onClick={() => router.push('/dashboard')}\n            >\n              Cancel\n            </Button>\n            <Button variant='lightBlue' className='h-[40px] w-[80px]'>\n              Create\n            </Button>\n          </div>\n        </div>\n      </form>\n    </div>\n  );\n};\n\nexport default CreateJob;\n"],"names":["CreateJob","handleSubmit","setValue","control","formState","errors","useForm","defaultValues","interviewStages","router","useRouter","useEffect","checkToken","token","localStorage","getItem","push","handleStorageChange","event","key","window","addEventListener","removeEventListener","data","jobpositions","useQuery","queryKey","queryFn","getJobpostion","enabled","departments","getDepartments","jobPositionOptions","map","value","jobPositionName","label","departmentOptions","jobDepartmentName","createJobMutation","useMutation","mutationFn","handleCreateJob","onSuccess","handleSubmission","interviewMedium","filteredData","mutate","div","className","form","onSubmit","JobInformation","InterviewStage","JobResponsibilites","IdealCandidates","Button","variant","onClick"],"mappings":"AAAA;;;;;+BA+IA;;;eAAA;;;;+DA9IiC;+BACM;wBAChB;uEACI;2EACI;wEACH;uEACD;4BACW;wBAK/B;4BACmB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAG1B,MAAMA,YAAY;IAChB,MAAM,EACJC,YAAY,EACZC,QAAQ,EACRC,OAAO,EACPC,WAAW,EAAEC,MAAM,EAAE,EACtB,GAAGC,IAAAA,sBAAO,EAAM;QACfC,eAAe;YACbC,iBAAiB,EAAE;QACrB;IACF;IAEA,MAAMC,SAASC,IAAAA,qBAAS;IAExBC,IAAAA,gBAAS,EAAC;QACR,MAAMC,aAAa;YACjB,MAAMC,QAAQC,aAAaC,OAAO,CAAC;YACnC,IAAI,CAACF,OAAO;gBACVJ,OAAOO,IAAI,CAAC;YACd;QACF;QAEAJ;QAEA,MAAMK,sBAAsB,CAACC;YAC3B,IAAIA,MAAMC,GAAG,KAAK,eAAe;gBAC/BP;YACF;QACF;QAEAQ,OAAOC,gBAAgB,CAAC,WAAWJ;QAEnC,OAAO;YACLG,OAAOE,mBAAmB,CAAC,WAAWL;QACxC;IACF,GAAG;QAACR;KAAO;IAEX,MAAM,EAAEc,MAAMC,YAAY,EAAE,GAAGC,IAAAA,oBAAQ,EAIrC;QACAC,UAAU;YAAC;SAAe;QAC1BC,SAAS,IAAMC,IAAAA,qBAAa;QAC5BC,SAAS;IACX;IAEA,MAAM,EAAEN,MAAMO,WAAW,EAAE,GAAGL,IAAAA,oBAAQ,EAIpC;QACAC,UAAU;YAAC;SAAc;QACzBC,SAAS,IAAMI,IAAAA,sBAAc;QAC7BF,SAAS;IACX;IAEA,MAAMG,qBACJR,cAAcS,IAAI,CAACT,eAA+C,CAAA;YAChEU,OAAOV,aAAaW,eAAe;YACnCC,OAAOZ,aAAaW,eAAe;QACrC,CAAA,MAAO,EAAE;IAEX,MAAME,oBACJP,aAAaG,IAAI,CAACH,cAAgD,CAAA;YAChEI,OAAOJ,YAAYQ,iBAAiB;YACpCF,OAAON,YAAYQ,iBAAiB;QACtC,CAAA,MAAO,EAAE;IAEX,MAAMC,oBAAoBC,IAAAA,uBAAW,EAAC;QACpCC,YAAYC,uBAAe;QAC3BC,WAAW;YACTlC,OAAOO,IAAI,CAAC;QACd;IACF;IAEA,MAAM4B,mBAAuC,CAACrB;QAC5C,MAAM,EAAEsB,eAAe,EAAE,GAAGC,cAAc,GAAGvB;QAE7CgB,kBAAkBQ,MAAM,CAACD;IAC3B;IAEA,qBACE,qBAACE;QAAIC,WAAU;kBACb,cAAA,qBAACC;YAAKD,WAAU;YAAQE,UAAUlD,aAAa2C;sBAC7C,cAAA,sBAACI;gBAAIC,WAAU;;kCAEb,qBAACG,uBAAc;wBACbjD,SAASA;wBACTE,QAAQA;wBACRH,UAAUA;wBACV8B,oBAAoBA;wBACpBK,mBAAmBA;;kCAIrB,qBAACgB,uBAAc;wBACblD,SAASA;wBACTD,UAAUA;wBACVG,QAAQA;;kCAIV,qBAACiD,2BAAkB;wBAACnD,SAASA;wBAASE,QAAQA;;kCAG9C,qBAACkD,wBAAe;wBAACpD,SAASA;wBAASE,QAAQA;;kCAE3C,sBAAC2C;wBAAIC,WAAU;;0CACb,qBAACO,cAAM;gCACLC,SAAQ;gCACRR,WAAU;gCACVS,SAAS,IAAMjD,OAAOO,IAAI,CAAC;0CAC5B;;0CAGD,qBAACwC,cAAM;gCAACC,SAAQ;gCAAYR,WAAU;0CAAoB;;;;;;;;AAQtE;MAEA,WAAejD"}