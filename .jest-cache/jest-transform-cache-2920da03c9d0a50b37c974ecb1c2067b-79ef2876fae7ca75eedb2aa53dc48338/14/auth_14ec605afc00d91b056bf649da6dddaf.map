{"version":3,"sources":["C:\\Users\\khana\\OneDrive\\Computer Files\\Desktop\\6senseHQ-HireX-client\\auth.ts"],"sourcesContent":["import axios from 'axios';\nimport NextAuth, { Session } from 'next-auth';\nimport GoogleProvider from 'next-auth/providers/google';\n\ndeclare module 'next-auth' {\n  interface Session {\n    accessToken?: string;\n  }\n}\n\nexport const { handlers, signIn, signOut, auth } = NextAuth({\n  session: {\n    strategy: 'jwt',\n  },\n  providers: [\n    GoogleProvider({\n      clientId: process.env.AUTH_GOOGLE_ID,\n      clientSecret: process.env.AUTH_GOOGLE_SECRET,\n      authorization: {\n        params: {\n          prompt: 'select_account',\n        },\n      },\n    }),\n  ],\n  callbacks: {\n    async jwt({ token, account }) {\n      if (account) {\n        const response = await axios.post(\n          'http://localhost:8000/auth/social-login',\n          {\n            idToken: account.id_token,\n            provider: 'google',\n          },\n          {\n            headers: {\n              'Content-Type': 'application/json',\n            },\n          }\n        );\n\n        token.accessToken = response.data?.tokens?.access_token;\n      }\n      return token;\n    },\n    async session({ session, token }) {\n      session.accessToken = token.accessToken as string;\n      return session;\n    },\n    async redirect() {\n      return `/dashboard`;\n    },\n  },\n});\n"],"names":["auth","handlers","signIn","signOut","NextAuth","session","strategy","providers","GoogleProvider","clientId","process","env","AUTH_GOOGLE_ID","clientSecret","AUTH_GOOGLE_SECRET","authorization","params","prompt","callbacks","jwt","token","account","response","axios","post","idToken","id_token","provider","headers","accessToken","data","tokens","access_token","redirect"],"mappings":";;;;;;;;;;;IAU0CA,IAAI;eAAJA;;IAA3BC,QAAQ;eAARA;;IAAUC,MAAM;eAANA;;IAAQC,OAAO;eAAPA;;;8DAVf;iEACgB;+DACP;;;;;;AAQpB,MAAM,EAAEF,QAAQ,EAAEC,MAAM,EAAEC,OAAO,EAAEH,IAAI,EAAE,GAAGI,IAAAA,iBAAQ,EAAC;IAC1DC,SAAS;QACPC,UAAU;IACZ;IACAC,WAAW;QACTC,IAAAA,eAAc,EAAC;YACbC,UAAUC,QAAQC,GAAG,CAACC,cAAc;YACpCC,cAAcH,QAAQC,GAAG,CAACG,kBAAkB;YAC5CC,eAAe;gBACbC,QAAQ;oBACNC,QAAQ;gBACV;YACF;QACF;KACD;IACDC,WAAW;QACT,MAAMC,KAAI,EAAEC,KAAK,EAAEC,OAAO,EAAE;YAC1B,IAAIA,SAAS;gBACX,MAAMC,WAAW,MAAMC,cAAK,CAACC,IAAI,CAC/B,2CACA;oBACEC,SAASJ,QAAQK,QAAQ;oBACzBC,UAAU;gBACZ,GACA;oBACEC,SAAS;wBACP,gBAAgB;oBAClB;gBACF;gBAGFR,MAAMS,WAAW,GAAGP,SAASQ,IAAI,EAAEC,QAAQC;YAC7C;YACA,OAAOZ;QACT;QACA,MAAMf,SAAQ,EAAEA,OAAO,EAAEe,KAAK,EAAE;YAC9Bf,QAAQwB,WAAW,GAAGT,MAAMS,WAAW;YACvC,OAAOxB;QACT;QACA,MAAM4B;YACJ,OAAO,CAAC,UAAU,CAAC;QACrB;IACF;AACF"}